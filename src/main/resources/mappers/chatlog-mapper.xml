<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Chatlog">

	<select id="select" resultType="kh.final_project.dto.ChatlogDTO">
		select * from chat_logs where chat_rooms = ${seq}
	</select>
	
	<insert id="insert">
		insert into chat_logs values (#{chat_rooms},#{writer},#{txt},default)
	</insert>
	
	<select id="maxdata" resultType="int">
		select count(*) from chat_logs where chat_rooms = ${seq}
	</select>
	
	<select id="selectscrolllist" resultType="kh.final_project.dto.ChatlogDTO">
		select * from 
		(select chat_rooms,writer,txt,write_date, row_number() over(order by write_date asc) ranks from chat_logs) 
		where chat_rooms = ${seq} and ranks between #{endPost} and #{startPost} order by ranks asc
		
	</select>
	
</mapper>